# Mappers

Данный компонент объединяет в себе всё что связано с портом картриджа и мапперами. Просьба рассматривать в данном контексте термин "Mappers" как синоним картриджа.

Реализация мапперов сделана типовой симуляцией схем распространенных мапперов на C++, используя BaseLogicLib.

## Список проблемных мест

Список того, что сейчас проблемное в этом компоненте:
- Не очень понятна сделана поддержка работы с дампами памяти (PRG/CHR). Регион CHR называется "CHR-ROM" со времен ранних стадий разработки. PRG вообще не поддерживается
- Очень хаотична сделана эмуляция мапперов формата .nes, в смысле трансляции номера маппера в компоненты платы картриджа. Это ещё усложняется тем, что один и тот же маппер (например MMC1) может быть реализован в разных картриджах уймой вариаций и как формировать и соединять компоненты картриджа для его симуляции не очень понятно
- Нет поддержки ROM чипов. Сейчас сделано всё обычных byte массивом. Нужно сделать по аналогии с чипом `Generic SRAM` в BaseBoardLib
- Эмуляция MMC1 требует отладки и проверки. Скорее всего что-то не так с делителем.

## Абстрактный картридж

В основе эмуляции мапперов лежит такой же принцип, как и для остальных частей эмулятора: берём устройство или разъем, пихаем туда сигналы и что-то происходит.

В случае с картриджем используется "абстрактный порт", который обобщает в себе все интерфейсы реального разъёма картриджа NES/Famicom (звук, Expansion Port), но в конкретной инстанции используются только необходимые (например если создана материнская плата NES - звука с картриджа не будет).

Фабрика (CartridgeFactory) создаёт инстанцию картриджа для основной части эмулятора на базе мета-информационных признаков (заголовок NES, метаинформация из JSONES).