# Отладочные способности Breaknes

Поскольку Breaknes является эмулятором на уровне вентилей, основная направленность отладки - это мониторинг различных сигналов, шин и прочего внутреннего состояния эмулируемой системы.

Отладочные сущности делятся на следующие категории:
- DebugInfo: получение внутреннего состояния
- MemLayout: получение дампов памяти

![debug](/UserManual/imgstore/debug.jpg)

## DebugInfo

Со стороны GUI `DebugInfo` отображается как PropertyGrid. Заполнение PropertyGrid происходит динамически, на базе записей отладочной информации, возвращаемой нативным ядром Breaknes.

Типы отладочной информации (DebugInfoType):
- DebugInfoType_Core: Получить внутреннее состояние M6502Core
- DebugInfoType_CoreRegs: Получить состояние регистров 6502
- DebugInfoType_APU: Получить внутреннее состояние компонентов APU
- DebugInfoType_APURegs: Получить состояние регистров APU
- DebugInfoType_PPU: Получить внутреннее состояние компонентов PPU
- DebugInfoType_PPURegs: Получить состояние регистров PPU
- DebugInfoType_Board: Получить внутреннее состояние компонентов материнской платы
- DebugInfoType_Cart: Получить внутреннее состояние компонентов картриджа и маппера

Методы:

- GetDebugInfoEntryCount: Получить количество отладочных записей указанного типа
- GetDebugInfo: Получить записи указанного типа

Managed приложение должно предварительно узнать количество записей и выделить массив для их получения.

## MemLayout

Различные куски памяти внутри эмулируемой системы описываются структурой `MemDesciptor`.

Методы:

- GetMemLayout: Получить количество дескрипторов памяти, которое зарегестрировано в ядре
- GetMemDescriptor: Получить информацию о блоке памяти
- DumpMem: Сдампить блок памяти целиком. Мы тут эмулируем NES, поэтому размеры дампов будут небольшими и нет смысла дампить частями.
